<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href='style.css' rel='stylesheet'>
  <link href='colors.css' rel='stylesheet'>
  <link href='order0.css' rel='stylesheet' id='orderStyle'>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
  <script src='despoil.js'></script>
  <title>Despoil - The (hopefully) less spoilery Sandman Universe timeline</title>
</head>

<body>
  <div class='topnav'>
    <img src='img/icon.png' title='arwk?'>
    <a href='#home'><i><b>De</b>spoil</i> - The (hopefully) less spoilery Sandman Universe timeline</a>
    <a href='javascript:void(0);' class='icon' onclick='toggleMenu()'>
      <i class='fa fa-bars'></i>
    </a>
  </div>
  <div class='row'>
    <div class='col-menu' id='menu'>
      <span>
        Publication date
        <label class='switch'>
          <input type='checkbox' id='order' onclick='changeOrder()'>
          <span class='slider round'></span>&nbsp;
        </label>
        Chronological
      </span>
      <details open>
        <summary>I have read...</summary>
        <button class="blockbtn" onclick='showNone()'>Nothing</button> - <button class="blockbtn" onclick='showAll()'>Everything</button><br>
        <details>
          <summary>Collections</summary>

          {% for collection in Collections %}

          <details>
            <summary>
              <input type='checkbox' class='checkroot' id='check_{{collection.id}}'
                onclick='setChildren("{{collection.id}}")' data-children='{{collection.childdata}}' />
              <label for='check_col_{{collection.index}}'>{{collection.name}}</label><br>
            </summary>

            {% for issue in collection.Issues %}

            <input type='checkbox' class='check_{{issue.id}}' id='check_coll_{{collection.index}}_{{issue.id}}'
              onclick='setChecked("check_coll_{{collection.index}}_", "{{issue.id}}")' />
            <label for='check_coll_{{collection.index}}_{{issue.id}}'>{{issue.body}}</label><br>

            {% endfor %}

          </details>

          {% endfor %}

        </details>
        <details>
          <summary>Story Threads</summary>

          {% for thread in Threads %}

          <details>
            <summary>
              <input type='checkbox' class='checkroot' id='check_{{thread.id}}' onclick='setChildren("{{thread.id}}")'
                data-children='{{thread.childdata}}' />
              <label for='check_{{thread.id}}'>{{thread.name}}</label><br>
            </summary>

            {% for issue in thread.Issues %}

            <input type='checkbox' class='check_{{issue.id}}' id='check_thread_{{issue.id}}'
              onclick='setChecked("check_thread_", "{{issue.id}}")' />
            <label for='check_thread_{{issue.id}}'>{{issue.body}}</label><br>

            {% endfor %}

          </details>

          {% endfor %}

        </details>
        <details>
          <summary>Individual issues</summary>

          {% for issue in Issues %}

          <input type='checkbox' class='check_issue checkybox check_{{issue.id}}' id='check_issue_{{issue.id}}'
            onclick='setChecked("check_issue_", "{{issue.id}}")' />
          <label for='check_issue_{{issue.id}}'>{{issue.body}}</label><br>

          {% endfor %}

        </details>
      </details>
      <div class='entity_hidden {{AllIssues}}'>
        <details open>
          <summary>Highlight...</summary>
          <button class="blockbtn" onclick='highlightNone()'>Clear Highlights</button>
          <details open>
            <summary>Characters / Places / Entities</summary>

            {% for entity in Entities %}

            <div class='entity_hidden {{entity.issues}}'>
              <input type='checkbox' class='check_entity' id='check_{{entity.id}}' onclick='setPushed("{{entity.id}}")'>
              <label for='check_{{entity.id}}'>{{entity.name}}</label><br>
            </div>

            {% endfor %}

          </details>
        </details>

      </div>

      <div class="spacer"></div>

      <div class="menufooter">

        <a href="https://ko-fi.com/benjymous" class="blockbtn" target="_blank"><img src="img/kofi.png" alt="Ko-fi donations"> Support </a>

        <a href="https://github.com/benjymous/despoil" class="blockbtn" target="_blank"><img src="img/github.png" alt="github"> Contribute </a>

      </div>

    </div>
    <div class='container'>
      <div class='scroll-marker'></div>
      <div class='box'>

        {% for item in Items %}

        {% case item.type %}
        {% when "Issue" %}
        <div class='itemrow {{item.id}}_outer'>
          <button class='top issueToggle {{item.threadkey}} {{item.id}}' onclick='toggleIssue("{{item.id}}")'>
            {{item.subtitle}}
          </button>
        </div>

        {% when "Item" %}

        <div class='itemrow {{item.id}}_outer hidden'>
          <div class='itemdate' title='{{item.dateval}}'>{{item.date}}</div>
          <div class='event {{item.threadkey}} {{item.id}} {{item.entities}}'>
            <div class='itemsubtitle'>{{item.subtitle}}</div>
            <span class='itembody'>{{item.body}}</span>
          </div>
        </div>

        {% when "Date" %}

        <div class='dateMarker hidden {{item.entities}}'>
          <div>
            {{item.body}}
          </div>
        </div>

        {% endcase %}

        {% endfor %}

      </div>
    </div>
  </div>
</body>

</html>